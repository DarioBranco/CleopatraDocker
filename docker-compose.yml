version: "3.9"
services:
  mirador:
    image: ubuntu/apache2
    volumes:
      - type: bind
        source: ./mirador/
        target: /var/www/html
    ports: 
      - "8087:80"
    networks:
      - rasa-networks
    container_name: mirador-container
  rasa-actions:
    image: rasa/rasa-sdk:3.2.1
    volumes:
      - type: bind
        source: ./rasa_repo/actions/
        target: /app/actions
    networks:
      - rasa-networks
    container_name: action-server
    ports:
      - 5055:5055 
    command:
        - start
  rasa:
    build:
      context: .
    volumes:
      - type: bind
        source: ./rasa_repo
        target: /app
    container_name: rasa-server
    ports:
      - "5005:5005"
    networks:
      - rasa-networks
    command: run -m models --enable-api --cors "*" --debug -p 5005
  mongodb:
    image: mongo:4.4.6
    container_name: mongodb-container
    ports:
      - "27017:27017"
    networks:
      - rasa-networks
    volumes:
      - type: bind
        source: ./data/db
        target: /data/db
    environment:
      - MONGO_INITDB_ROOT_USERNAME=yourusername
      - MONGO_INITDB_ROOT_PASSWORD=yourpassword
networks:
  rasa-networks:
    external: false
    name: rasa-networks